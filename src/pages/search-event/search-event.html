<ion-header no-border>
  <ion-navbar color="white">
    <ion-title text-center>חיפוש בית כנסת</ion-title>
  </ion-navbar>
</ion-header>


<ion-content>
  <form [formGroup]="formGroup" dir="rtl">
    <ion-item>
      <ion-input [(ngModel)]="searchEvent.name" [ngModelOptions]="{standalone: true}"
                 placeholder="חפש לפי שם בית כנסת..." clearInput dir="rtl"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label stacked>כתובת</ion-label>
      <ion-input #ionInput fkPlaceAutoComplete [(ngModel)]="searchEvent.mapObject"
                 [ngModelOptions]="{standalone: true}"
                 [inputElement]="ionInput._native?.nativeElement"
                 clearInput placeholder="חפש ביחס לכתובת" dir="rtl"></ion-input>

      <a item-end margin-left fkLocationPickerModal
         [(ngModel)]="searchEvent.mapObject" [ngModelOptions]="{standalone: true}"
         (modalClosed)="onModalClosed($event)">מפה</a>
    </ion-item>

    <ion-card margin-top>

      <ion-row dir="rtl">

        <ion-col>
          <ion-item>
            <ion-label stacked>החל מ-</ion-label>
            <ion-datetime formControlName="startsAt" [(ngModel)]="searchEvent.startTime"
                          displayFormat="HH:mm" pickerFormat="HH:mm" placeholder="בחר שעה"></ion-datetime>
          </ion-item>
        </ion-col>

        <ion-col>
          <ion-item>
            <ion-label stacked>עד ל-</ion-label>
            <ion-datetime formControlName="startsAt" [(ngModel)]="searchEvent.endTime"
                          displayFormat="HH:mm" pickerFormat="HH:mm" placeholder="בחר שעה"></ion-datetime>
          </ion-item>
        </ion-col>

      </ion-row>
      <ion-item dir="ltr">
        <ion-label>טווח רדיוס</ion-label>
        <ion-range min="1" max="25" pin="true" [ngModelOptions]="{standalone: true}"
                   [(ngModel)]="searchEvent.radiusRange">
          <ion-label range-left>1</ion-label>
          <ion-label range-right>25</ion-label>
        </ion-range>
      </ion-item>

      <ion-item>
        <ion-label fixed>נוסח תפילה</ion-label>
        <fk-prayer-version-options [(ngModel)]="searchEvent.prayerNosach" [ngModelOptions]="{standalone: true}"
                                   [allowMultiple]="true" title="בחר נוסח תפילה"
                                   placeholder="בחר נוסח תפילה" item-content></fk-prayer-version-options>
      </ion-item>
    </ion-card>

    <ion-card margin-top>
      <fk-synagogue-options [(ngModel)]="searchEvent.synagogueOptions"
                            [ngModelOptions]="{standalone: true}" class="form-background-color"></fk-synagogue-options>

      <div margin>
        <div text-center margin-bottom>באילו ימים?</div>
        <fk-day-range [(ngModel)]="searchEvent.daysRange" [ngModelOptions]="{standalone: true}"></fk-day-range>
      </div>
    </ion-card>
  </form>

  <button (click)="printFormErrors()">check errors</button>
</ion-content>

<ion-footer padding text-center [attr.disabled]="!formGroup.valid">
  <button id="search-button" class="transparent" dir="rtl" [disabled]="!formGroup.valid">
    <span>חפש מניינים</span>
    <ion-icon name="search"></ion-icon>
  </button>
</ion-footer>


